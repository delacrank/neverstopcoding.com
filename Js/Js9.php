<!DOCTYPE html>
<html>
<head><meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html;
	charset=utf-8" />
<title>Key Listeners - Javascript Web Programming</title>
<link href='http://fonts.googleapis.com/css?family=Varela+Round' rel="stylesheet"><link href='http://fonts.googleapis.com/css?family=Cormorant+Infant' rel="stylesheet"><link rel="stylesheet"
      type="text/css"
      href="../testcss.css">
<script type="text/javascript">  
</script>
</head>
<body>
    
 <!-- Header -->
<?php include('..//Includes//header.php'); ?>

<!-- Navigation -->
<?php include('..//Includes//nav.php'); ?>
    
<!-- Navigation2 -->
<?php include('..//Includes//nav2.php'); ?>
    
<!-- Left --><div class = "mainWrapper">
<?php include('..//Includes//Left_Js.php'); ?>
    
<!-- Right --> 
<div id ="rightz">

<h1>Key Listeners - Javascript Web Development</h1>

<h2>Working with Key Listeners</h2>

    <p>Previously we constructed a square and placed a ball inside of it.  Then we gave life to that ball by adding several buttons and using those buttons to move the ball around that square.
        
<span class ="nl">In our next example we are going to use the same exact html code, yet we are going to change the javascript in order to make it so that we will be able to move our ball using are arrow keys instead.</span></p>
    
    
<div onload = "init()">
<h1>Use Arrow Keys to Move the ball</h1>
<div id = "surface"
style="border: green 4px inset;
  height: 400px;
  width: 620px;">
<div id = "sprite"
style = "position: absolute;
top: 660px;
left: 400px;
height: 25px;
width: 25px;">
<img src = "../Images/ball.gif"
alt = "ball" />
</div>
</div>
<p id = "output"> x = 400, y = 2050 </p>
</div>
    
<script type="text/javascript">
var sprite;
var x, y;

var MIN_X = 400;
var MAX_X = 880;
var MIN_Y = 660;
var MAX_Y = 980;

function init(){
  sprite = document.getElementById("sprite");
  document.onkeydown = keyListener;
}

function keyListener(e) {
    if(!e){
        e = window.Event;
    }
    
    if(e.keyCode == 37){
        moveSprite(-10, 0);
    }
    
    if(e.keyCode == 38){
        moveSprite(0, -10);
    }
    
    if(e.keyCode == 39){
        moveSprite(10, 0);
    }
    
    if(e.keyCode == 40){
        moveSprite(0, 10);
    }
    e.preventDefault();
}
    
function moveSprite(dx, dy){
var surface = document.getElementById("surface");

x = parseInt(sprite.style.left);
y = parseInt(sprite.style.top);

x += dx;
y += dy;

checkBounds();

sprite.style.left = x + "px";
sprite.style.top = y + "px";

var output = document.getElementById("output");
output.innerHTML = "x: " + x + ", y: " + y;
}

function checkBounds(){
  if (x > MAX_X){
    x = MIN_X;
  }
  if (x < MIN_X){
    x = MAX_X;
  } 
  if (y > MAX_Y){
    y = MIN_Y;
  }
  if (y < MIN_Y){
    y = MAX_Y;
  }
} 
</script>     
    
<p>I won't bother to write the html code because it remains the same, but i will show the additional code used in our javascript for the key listener functionality.</p>    
    
<em>Code:</em>    
<!-- code -->    
<pre class="code">
&lt;script type="text/javascript">
var sprite;
var x, y;

var MIN_X = 400;
var MAX_X = 880;
var MIN_Y = 660;
var MAX_Y = 980;

function init(){

  sprite = document.getElementById("sprite");
<span class="comments">// When a key is pressed check this function as per event.</span>
  document.onkeydown = keyListener;
}

<span class="comments">// The key will be variable 'e'</span>
function keyListener(e) {
    if(!e){
        <span class="comments">// Create the event object</span>
        e = window.Event;
    }
    
    <span class="comments">// If the left arrow key is pressed execute this function</span>
    if(e.keyCode == 37){
        moveSprite(-10, 0);
    }
    
    <span class="comments">// If the right arrow key is pressed execute this function</span>
    if(e.keyCode == 38){
        moveSprite(0, -10);
    }
    
    <span class="comments">// If the up arrow key is pressed execute this function</span>
    if(e.keyCode == 39){
        moveSprite(10, 0);
    }
    
    <span class="comments">// If the down arrow key is pressed, execute this function</span>
    if(e.keyCode == 40){
        moveSprite(0, 10);
    }
        
    <span class="comments">// Prevent default actions, such as scrolling up, down, left or right</span>
    e.preventDefault();
}
    
function moveSprite(dx, dy){
    var surface = document.getElementById("surface");
    x = parseInt(sprite.style.left);
    y = parseInt(sprite.style.top);
    x += dx;
    y += dy;

    checkBounds();
    sprite.style.left = x + "px";
    sprite.style.top = y + "px";
    var output = document.getElementById("output");
    output.innerHTML = "x: " + x + ", y: " + y;
}

function checkBounds(){
  if (x > MAX_X){
    x = MIN_X;
  }
  if (x &lt; MIN_X){
    x = MAX_X;
  }
  if (y > MAX_Y){
    y = MIN_Y;
  }
  if (y &lt; MIN_Y){
    y = MAX_Y;
  }
}</pre>
<br />
<hr />
    
<!-- Working with Mouse Listener -->  
<h2>Working with Mouse Listener</h2>    

    <p>In our last example we were able to move the ball using our keys, and prior to that we gave the functionality to our buttons, now we are going to use our mouse to move the ball around the box.</p>
    
<em>Code:</em>    
<!-- Code -->    
<pre class="code">
&lt;script>
var sprite;
    
function init() {
    sprite = document.getElementById("sprite");
    <span class="comments">// call the on move mouse event</span>
    document.onmousemove = mouseListener;
}
    
function mouseListener(e) {
    if(!e) {
        e = window.event;
    }
    
<span class="comments">// obtain the coordinates of the position of the ball</span>
height = parseInt(sprite.style.height);
width = parseInt(sprite.style.width);
    
<span class="comments">// return the current position of the mouse based on its
// current location of the page</span>
x = e.pageX;
y = e.pageY;
    
sprite.style.left = x + "px";
    sprite.style.top = y + "px";
} 
&lt;/script> </pre>       
    
<br />
<hr />
<a href="Js8.html">Previous Page</a>  <span class="next"><a href="Js10.html"> Next page</a></span>
<br /><br />  
</div>

</div><!-- Footer -->
<?php include('..//Includes//footer.php'); ?>
    
</body>
</html>